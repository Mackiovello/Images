<link rel="import" href="/Images/elements/so-juicy-filedrop/so-juicy-filedrop.html" />
<link href="/Images/css/standalone.css" rel="stylesheet" />

<template>
    <template is="dom-bind">
        <so-juicy-filedrop on-mousedown="imageClickEvent" session-id="{{model.SessionId}}" upload-url="/images/images" value="{{model.ImageURL$}}" max-file-size="{{model.MaxFileSize}}" allowed-mime-types="{{model.AllowedMimeTypes}}" ismobile="{{'true'}}">
            <template is="dom-if" if="{{model.ImageURL$}}">
                <div>
                    <button class="btn btn-default btn-lg" onclick="++this.value;" value="{{model.Delete$::click}}">Clear</button>
                </div>
            </template>
        </so-juicy-filedrop>
        <div>
            <paper-dialog opened="[[model.IsLightBoxVisible$]]" with-backdrop="true" class="images-preview-image-dialog" on-mousedown="closeEvent" on-iron-overlay-closed="closeEvent">
                <img src="{{model.ImageURL$}}" class="images-preview-image-dialog-image" />
            </paper-dialog>
        </div>
    </template>
    <script>
        (function (template) {
            template.closeEvent = function () {
                template.set("model.IsLightBoxVisible$", false);
            }
            template.imageClickEvent = function (e) {
                if (template.model.ImageURL$ && e.target.nodeName == "IMG") {
                    console.log(3)
                    template.set("model.IsLightBoxVisible$", true);
                }
            }
        })(document.currentScript.previousElementSibling);
    </script>
</template>
